# ä¾§è¾¹æ å¯¼èˆªç»„ä»¶

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx)
- [team-dialog.tsx](file://components/sidebar/team-dialog.tsx)
- [project-dialog.tsx](file://components/sidebar/project-dialog.tsx)
- [mini-calendar.tsx](file://components/sidebar/mini-calendar.tsx)
- [main-navigation.tsx](file://components/navigation/main-navigation.tsx)
- [calendar-store.ts](file://lib/store/calendar-store.ts)
- [types.ts](file://lib/types.ts)
- [page.tsx](file://app/page.tsx)
- [sidebar.tsx](file://components/ui/sidebar.tsx)
- [use-mobile.tsx](file://hooks/use-mobile.ts)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–å…³ç³»åˆ†æ](#ä¾èµ–å…³ç³»åˆ†æ)
7. [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
8. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)

## ç®€ä»‹

æœ¬æ–‡ä»¶è¯¦ç»†ä»‹ç»åº”ç”¨çš„ä¾§è¾¹æ å¯¼èˆªç³»ç»Ÿç»„ä»¶ï¼ŒåŒ…æ‹¬å¯¼èˆªèœå•ã€å›¢é˜Ÿå¯¹è¯æ¡†ã€é¡¹ç›®å¯¹è¯æ¡†å’Œè¿·ä½ æ—¥å†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚è¯¥å¯¼èˆªç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯çš„æ— ç¼åˆ‡æ¢ï¼Œæä¾›å®Œæ•´çš„å›¢é˜Ÿåä½œå’Œé¡¹ç›®ç®¡ç†åŠŸèƒ½ã€‚

## é¡¹ç›®ç»“æ„

å¯¼èˆªç³»ç»Ÿä¸»è¦ç”±ä»¥ä¸‹å±‚æ¬¡ç»„æˆï¼š

```mermaid
graph TB
subgraph "åº”ç”¨å±‚"
App[åº”ç”¨é¡µé¢]
Layout[é¡µé¢å¸ƒå±€]
end
subgraph "å¯¼èˆªå±‚"
Sidebar[ä¾§è¾¹æ å®¹å™¨]
NavMenu[å¯¼èˆªèœå•]
MiniCal[è¿·ä½ æ—¥å†]
MainNav[ä¸»å¯¼èˆª]
end
subgraph "å¯¹è¯æ¡†å±‚"
TeamDialog[å›¢é˜Ÿå¯¹è¯æ¡†]
ProjectDialog[é¡¹ç›®å¯¹è¯æ¡†]
end
subgraph "çŠ¶æ€ç®¡ç†å±‚"
Store[æ—¥å†å­˜å‚¨]
Types[ç±»å‹å®šä¹‰]
end
App --> Sidebar
Sidebar --> NavMenu
Sidebar --> MiniCal
Sidebar --> MainNav
NavMenu --> TeamDialog
NavMenu --> ProjectDialog
NavMenu --> Store
MiniCal --> Store
MainNav --> Store
Store --> Types
```

**å›¾è¡¨æ¥æº**
- [page.tsx](file://app/page.tsx#L148-L182)
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx#L205-L560)
- [mini-calendar.tsx](file://components/sidebar/mini-calendar.tsx#L10-L114)

**ç« èŠ‚æ¥æº**
- [page.tsx](file://app/page.tsx#L148-L182)
- [sidebar.tsx](file://components/ui/sidebar.tsx#L154-L206)

## æ ¸å¿ƒç»„ä»¶

### å¯¼èˆªèœå•ç»„ä»¶

å¯¼èˆªèœå•æ˜¯ä¾§è¾¹æ çš„æ ¸å¿ƒç»„ä»¶ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š
- My Days è§†å›¾åˆ‡æ¢
- å›¢é˜Ÿåˆ—è¡¨ç®¡ç†
- é¡¹ç›®åˆ—è¡¨ç®¡ç†
- å›¢é˜Ÿ/é¡¹ç›®æ“ä½œï¼ˆåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€é€€å‡ºï¼‰
- é»˜è®¤å›¢é˜Ÿè®¾ç½®

### å›¢é˜Ÿå¯¹è¯æ¡†

å›¢é˜Ÿå¯¹è¯æ¡†æä¾›å®Œæ•´çš„å›¢é˜Ÿç®¡ç†åŠŸèƒ½ï¼š
- å›¢é˜ŸåŸºæœ¬ä¿¡æ¯ç®¡ç†ï¼ˆåç§°ã€æè¿°ã€é¢œè‰²ï¼‰
- æˆå‘˜ç®¡ç†ï¼ˆå¤šé€‰ç”¨æˆ·é€‰æ‹©å™¨ï¼‰
- åˆ›å»ºè€…æƒé™ç®¡ç†
- ååŒæƒé™è®¾ç½®
- è¡¨å•éªŒè¯å’Œé”™è¯¯å¤„ç†

### é¡¹ç›®å¯¹è¯æ¡†

é¡¹ç›®å¯¹è¯æ¡†æä¾›é¡¹ç›®ç®¡ç†åŠŸèƒ½ï¼š
- é¡¹ç›®åŸºæœ¬ä¿¡æ¯ç®¡ç†
- æˆå‘˜ç®¡ç†åŠŸèƒ½
- åˆ›å»ºè€…æƒé™æ§åˆ¶
- ååŒæƒé™é…ç½®
- åªè¯»æ¨¡å¼æ”¯æŒ

### è¿·ä½ æ—¥å†

è¿·ä½ æ—¥å†æä¾›å¿«é€Ÿæ—¥æœŸå¯¼èˆªåŠŸèƒ½ï¼š
- æœˆåº¦è§†å›¾å±•ç¤º
- ä»»åŠ¡æ ‡è®°æ˜¾ç¤º
- ä»Šæ—¥é«˜äº®
- æœˆä»½åˆ‡æ¢
- æ—¥æœŸç‚¹å‡»äº‹ä»¶

**ç« èŠ‚æ¥æº**
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx#L32-L561)
- [team-dialog.tsx](file://components/sidebar/team-dialog.tsx#L38-L241)
- [project-dialog.tsx](file://components/sidebar/project-dialog.tsx#L40-L243)
- [mini-calendar.tsx](file://components/sidebar/mini-calendar.tsx#L10-L114)

## æ¶æ„æ¦‚è§ˆ

å¯¼èˆªç³»ç»Ÿé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œç¡®ä¿ç»„ä»¶é—´çš„æ¸…æ™°åˆ†ç¦»å’ŒèŒè´£æ˜ç¡®ï¼š

```mermaid
graph TD
subgraph "è¡¨ç°å±‚"
UI[UIç»„ä»¶]
Dialogs[å¯¹è¯æ¡†ç»„ä»¶]
Calendar[æ—¥å†ç»„ä»¶]
end
subgraph "ä¸šåŠ¡é€»è¾‘å±‚"
Services[æœåŠ¡å±‚]
Utils[å·¥å…·å‡½æ•°]
end
subgraph "çŠ¶æ€ç®¡ç†å±‚"
Store[Zustand Store]
API[APIå®¢æˆ·ç«¯]
end
subgraph "æ•°æ®å±‚"
LocalStorage[æœ¬åœ°å­˜å‚¨]
Backend[åç«¯API]
end
UI --> Store
Dialogs --> Store
Calendar --> Store
Store --> API
Store --> LocalStorage
API --> Backend
Services --> API
Utils --> Services
```

**å›¾è¡¨æ¥æº**
- [calendar-store.ts](file://lib/store/calendar-store.ts#L200-L546)
- [types.ts](file://lib/types.ts#L127-L141)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### å¯¼èˆªèœå•ç»„ä»¶è¯¦è§£

å¯¼èˆªèœå•ç»„ä»¶å®ç°äº†å¤æ‚çš„äº¤äº’é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†ï¼š

#### çŠ¶æ€ç®¡ç†ç»“æ„

```mermaid
classDiagram
class NavigationMenu {
+navigationMode : NavigationMode
+selectedTeamId : string | null
+selectedProjectId : string | null
+teams : Team[]
+projects : Project[]
+currentUser : User | null
+teamsExpanded : boolean
+projectsExpanded : boolean
+teamDialogOpen : boolean
+projectDialogOpen : boolean
+editingTeam : Team | undefined
+editingProject : Project | undefined
+deleteTeamConfirm : Team | null
+deleteProjectConfirm : Project | null
+leaveTeamConfirm : Team | null
+leaveProjectConfirm : Project | null
}
class CalendarStore {
+navigationMode : NavigationMode
+setNavigationMode(mode)
+selectedTeamId : string | null
+setSelectedTeamId(id)
+selectedProjectId : string | null
+setSelectedProjectId(id)
+teams : Team[]
+projects : Project[]
+currentUser : User | null
+addTeam(team)
+updateTeam(id, team)
+deleteTeam(id)
+leaveTeam(id)
+addProject(project)
+updateProject(id, project)
+deleteProject(id)
+leaveProject(id)
}
NavigationMenu --> CalendarStore : "ä½¿ç”¨"
```

**å›¾è¡¨æ¥æº**
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx#L32-L48)
- [calendar-store.ts](file://lib/store/calendar-store.ts#L33-L198)

#### æƒé™æ§åˆ¶ç³»ç»Ÿ

ç»„ä»¶å®ç°äº†å¤šå±‚æ¬¡çš„æƒé™æ§åˆ¶æœºåˆ¶ï¼š

```mermaid
flowchart TD
Start([ç”¨æˆ·æ“ä½œ]) --> CheckUser{æ£€æŸ¥ç”¨æˆ·æƒé™}
CheckUser --> |ç®¡ç†å‘˜| CanManage[å…·æœ‰å®Œå…¨ç®¡ç†æƒé™]
CheckUser --> |å›¢é˜Ÿåˆ›å»ºè€…| CanManageTeam[å›¢é˜Ÿç®¡ç†æƒé™]
CheckUser --> |é¡¹ç›®åˆ›å»ºè€…| CanManageProject[é¡¹ç›®ç®¡ç†æƒé™]
CheckUser --> |æ™®é€šæˆå‘˜| CannotManage[ä»…æŸ¥çœ‹æƒé™]
CanManage --> ShowActions[æ˜¾ç¤ºæ‰€æœ‰æ“ä½œæŒ‰é’®]
CanManageTeam --> ShowTeamActions[æ˜¾ç¤ºå›¢é˜Ÿæ“ä½œ]
CanManageProject --> ShowProjectActions[æ˜¾ç¤ºé¡¹ç›®æ“ä½œ]
CannotManage --> ShowViewOnly[ä»…æ˜¾ç¤ºæŸ¥çœ‹æ“ä½œ]
ShowActions --> Edit[ç¼–è¾‘]
ShowActions --> Delete[åˆ é™¤]
ShowActions --> Leave[é€€å‡º]
ShowTeamActions --> EditTeam[ç¼–è¾‘å›¢é˜Ÿ]
ShowProjectActions --> EditProject[ç¼–è¾‘é¡¹ç›®]
ShowViewOnly --> View[æŸ¥çœ‹è¯¦æƒ…]
```

**å›¾è¡¨æ¥æº**
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx#L87-L95)

#### æ•°æ®æµå¤„ç†

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant NavMenu as å¯¼èˆªèœå•
participant Store as æ—¥å†å­˜å‚¨
participant API as APIå®¢æˆ·ç«¯
participant Dialog as å¯¹è¯æ¡†
User->>NavMenu : ç‚¹å‡»å›¢é˜Ÿ/é¡¹ç›®æ“ä½œ
NavMenu->>Store : æ›´æ–°çŠ¶æ€
Store->>API : æ‰§è¡Œæ•°æ®æ“ä½œ
API-->>Store : è¿”å›æ“ä½œç»“æœ
Store-->>NavMenu : æ›´æ–°çŠ¶æ€
NavMenu->>Dialog : æ‰“å¼€ç›¸åº”å¯¹è¯æ¡†
Dialog->>Store : æäº¤è¡¨å•æ•°æ®
Store->>API : å‘é€è¯·æ±‚
API-->>Store : ç¡®è®¤æ“ä½œ
Store-->>NavMenu : åˆ·æ–°æ•°æ®
NavMenu-->>User : æ˜¾ç¤ºç»“æœ
```

**å›¾è¡¨æ¥æº**
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx#L193-L203)
- [calendar-store.ts](file://lib/store/calendar-store.ts#L120-L138)

**ç« èŠ‚æ¥æº**
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx#L32-L561)
- [calendar-store.ts](file://lib/store/calendar-store.ts#L200-L546)

### å›¢é˜Ÿå¯¹è¯æ¡†ç»„ä»¶

å›¢é˜Ÿå¯¹è¯æ¡†æä¾›äº†å®Œæ•´çš„å›¢é˜Ÿç®¡ç†åŠŸèƒ½ï¼š

#### è¡¨å•å­—æ®µè®¾è®¡

| å­—æ®µ | ç±»å‹ | å¿…å¡« | æè¿° |
|------|------|------|------|
| åç§° | String | æ˜¯ | å›¢é˜Ÿåç§°ï¼Œå¿…å¡«ä¸”ä¸èƒ½ä¸ºç©º |
| æè¿° | String | å¦ | å›¢é˜Ÿæè¿°ä¿¡æ¯ |
| é¢œè‰² | Color | æ˜¯ | å›¢é˜Ÿé¢œè‰²æ ‡è¯†ï¼Œé¢„è®¾8ç§é¢œè‰² |
| åˆ›å»ºè€… | User | æ˜¯ | å›¢é˜Ÿåˆ›å»ºè€…ï¼Œç®¡ç†å‘˜å¯ä¿®æ”¹ |
| æˆå‘˜ | Array | æ˜¯ | å›¢é˜Ÿæˆå‘˜åˆ—è¡¨ï¼Œè‡³å°‘åŒ…å«ä¸€ä¸ªæˆå‘˜ |
| ååŒæƒé™ | Enum | æ˜¯ | ALL_MEMBERS æˆ– CREATOR_ONLY |

#### è¡¨å•éªŒè¯æµç¨‹

```mermaid
flowchart TD
FormSubmit[æäº¤è¡¨å•] --> ValidateName{éªŒè¯åç§°}
ValidateName --> |æ— æ•ˆ| ShowNameError[æ˜¾ç¤ºåç§°é”™è¯¯]
ValidateName --> |æœ‰æ•ˆ| ValidateMembers{éªŒè¯æˆå‘˜æ•°é‡}
ValidateMembers --> |å°äº1| ShowMemberError[æ˜¾ç¤ºæˆå‘˜é”™è¯¯]
ValidateMembers --> |æœ‰æ•ˆ| ValidateCreator{éªŒè¯åˆ›å»ºè€…}
ValidateCreator --> |æœ‰æ•ˆ| SubmitData[æäº¤æ•°æ®]
ValidateCreator --> |æ— æ•ˆ| ShowCreatorError[æ˜¾ç¤ºåˆ›å»ºè€…é”™è¯¯]
ShowNameError --> End([ç»“æŸ])
ShowMemberError --> End
ShowCreatorError --> End
SubmitData --> Success[æ“ä½œæˆåŠŸ]
Success --> CloseDialog[å…³é—­å¯¹è¯æ¡†]
CloseDialog --> End
```

**å›¾è¡¨æ¥æº**
- [team-dialog.tsx](file://components/sidebar/team-dialog.tsx#L60-L96)

**ç« èŠ‚æ¥æº**
- [team-dialog.tsx](file://components/sidebar/team-dialog.tsx#L38-L241)

### é¡¹ç›®å¯¹è¯æ¡†ç»„ä»¶

é¡¹ç›®å¯¹è¯æ¡†ä¸å›¢é˜Ÿå¯¹è¯æ¡†ç±»ä¼¼ï¼Œä½†æœ‰ä¸€äº›ç‰¹å®šå·®å¼‚ï¼š

#### é¡¹ç›®ç‰¹æ®Šå¤„ç†

- **ä¸ªäººäº‹åŠ¡é¡¹ç›®**ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨å°†åŒ…å«"ä¸ªäººäº‹åŠ¡"çš„é¡¹ç›®ç½®é¡¶æ˜¾ç¤º
- **é»˜è®¤é¡¹ç›®å¤„ç†**ï¼šç¬¬ä¸€ä¸ªé¡¹ç›®ï¼ˆé€šå¸¸ä¸ºä¸ªäººäº‹åŠ¡ï¼‰ä¸æ˜¾ç¤ºç¼–è¾‘/åˆ é™¤æŒ‰é’®
- **æƒé™ç»§æ‰¿**ï¼šé¡¹ç›®æƒé™è®¾ç½®å½±å“ä»»åŠ¡åä½œè¡Œä¸º

#### é¡¹ç›®æ’åºé€»è¾‘

```mermaid
flowchart TD
GetProjects[è·å–ç”¨æˆ·é¡¹ç›®] --> FilterProjects{è¿‡æ»¤é¡¹ç›®}
FilterProjects --> SortProjects[æ’åºé¡¹ç›®]
SortProjects --> CheckPersonal{æ£€æŸ¥æ˜¯å¦åŒ…å«ä¸ªäººäº‹åŠ¡}
CheckPersonal --> |æ˜¯| PersonalFirst[ä¸ªäººäº‹åŠ¡é¡¹ç›®ç½®é¡¶]
CheckPersonal --> |å¦| Alphabetical[æŒ‰å­—æ¯æ’åº]
PersonalFirst --> FinalOrder[æœ€ç»ˆæ’åºç»“æœ]
Alphabetical --> FinalOrder
FinalOrder --> Display[æ˜¾ç¤ºé¡¹ç›®åˆ—è¡¨]
```

**å›¾è¡¨æ¥æº**
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx#L66-L78)

**ç« èŠ‚æ¥æº**
- [project-dialog.tsx](file://components/sidebar/project-dialog.tsx#L40-L243)
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx#L66-L78)

### è¿·ä½ æ—¥å†ç»„ä»¶

è¿·ä½ æ—¥å†æä¾›äº†ç®€æ´çš„æ—¥æœŸå¯¼èˆªåŠŸèƒ½ï¼š

#### æ—¥æœŸå¤„ç†é€»è¾‘

```mermaid
flowchart TD
ClickDate[ç‚¹å‡»æ—¥æœŸ] --> SetDate[è®¾ç½®å½“å‰æ—¥æœŸ]
SetDate --> UpdateStore[æ›´æ–°å­˜å‚¨çŠ¶æ€]
UpdateStore --> RefreshTasks[åˆ·æ–°ä»»åŠ¡æ•°æ®]
RefreshTasks --> RenderCalendar[é‡æ–°æ¸²æŸ“æ—¥å†]
RenderCalendar --> CheckTasks{æ£€æŸ¥å½“å¤©ä»»åŠ¡}
CheckTasks --> |æœ‰ä»»åŠ¡| MarkTasks[æ ‡è®°ä»»åŠ¡]
CheckTasks --> |æ— ä»»åŠ¡| NoMark[ä¸æ ‡è®°]
MarkTasks --> ShowCalendar[æ˜¾ç¤ºå®Œæ•´æ—¥å†]
NoMark --> ShowCalendar
```

**å›¾è¡¨æ¥æº**
- [mini-calendar.tsx](file://components/sidebar/mini-calendar.tsx#L44-L46)

#### ä»»åŠ¡æ ‡è®°ç®—æ³•

```mermaid
flowchart TD
HasTasks[æ£€æŸ¥ä»»åŠ¡] --> LoopTasks[éå†æ‰€æœ‰ä»»åŠ¡]
LoopTasks --> CheckDateRange{æ£€æŸ¥æ—¥æœŸèŒƒå›´}
CheckDateRange --> |åœ¨èŒƒå›´å†…| MarkTask[æ ‡è®°ä»»åŠ¡]
CheckDateRange --> |ä¸åœ¨èŒƒå›´å†…| NextTask[ä¸‹ä¸€ä¸ªä»»åŠ¡]
MarkTask --> NextTask
NextTask --> LoopTasks
LoopTasks --> |å®Œæˆ| ShowIndicator[æ˜¾ç¤ºä»»åŠ¡æŒ‡ç¤ºå™¨]
```

**å›¾è¡¨æ¥æº**
- [mini-calendar.tsx](file://components/sidebar/mini-calendar.tsx#L33-L42)

**ç« èŠ‚æ¥æº**
- [mini-calendar.tsx](file://components/sidebar/mini-calendar.tsx#L10-L114)

### ä¸»å¯¼èˆªç»„ä»¶

ä¸»å¯¼èˆªç»„ä»¶æä¾›ä¸‰ç§è§†å›¾æ¨¡å¼çš„åˆ‡æ¢ï¼š

| æ¨¡å¼ | å›¾æ ‡ | åŠŸèƒ½ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| æ—¥å† | ğŸ“… | æ—¥å†è§†å›¾ | ä»»åŠ¡å¯è§†åŒ–å±•ç¤º |
| æ¸…å• | ğŸ“‹ | åˆ—è¡¨è§†å›¾ | ä»»åŠ¡åˆ—è¡¨ç®¡ç† |
| ç»Ÿè®¡ | ğŸ“Š | ç»Ÿè®¡è§†å›¾ | æ•°æ®åˆ†æå’ŒæŠ¥å‘Š |

**ç« èŠ‚æ¥æº**
- [main-navigation.tsx](file://components/navigation/main-navigation.tsx#L8-L38)

## ä¾èµ–å…³ç³»åˆ†æ

### ç»„ä»¶é—´ä¾èµ–å…³ç³»

```mermaid
graph TB
subgraph "å¤–éƒ¨ä¾èµ–"
Zustand[ZustandçŠ¶æ€ç®¡ç†]
RadixUI[Radix UIç»„ä»¶]
Lucide[Lucideå›¾æ ‡åº“]
Toast[Toasté€šçŸ¥]
end
subgraph "å†…éƒ¨ç»„ä»¶"
NavMenu[å¯¼èˆªèœå•]
TeamDialog[å›¢é˜Ÿå¯¹è¯æ¡†]
ProjectDialog[é¡¹ç›®å¯¹è¯æ¡†]
MiniCal[è¿·ä½ æ—¥å†]
MainNav[ä¸»å¯¼èˆª]
end
subgraph "å·¥å…·æ¨¡å—"
Store[æ—¥å†å­˜å‚¨]
Types[ç±»å‹å®šä¹‰]
Utils[å·¥å…·å‡½æ•°]
end
NavMenu --> Zustand
TeamDialog --> Zustand
ProjectDialog --> Zustand
MiniCal --> Zustand
MainNav --> Zustand
NavMenu --> Store
TeamDialog --> Store
ProjectDialog --> Store
MiniCal --> Store
MainNav --> Store
NavMenu --> Types
TeamDialog --> Types
ProjectDialog --> Types
MiniCal --> Types
MainNav --> Types
NavMenu --> Utils
TeamDialog --> Utils
ProjectDialog --> Utils
MiniCal --> Utils
MainNav --> Utils
NavMenu --> RadixUI
NavMenu --> Lucide
NavMenu --> Toast
```

**å›¾è¡¨æ¥æº**
- [navigation-menu.tsx](file://components/sidebar/navigation-menu.tsx#L1-L31)
- [team-dialog.tsx](file://components/sidebar/team-dialog.tsx#L1-L18)
- [project-dialog.tsx](file://components/sidebar/project-dialog.tsx#L1-L18)

### çŠ¶æ€ç®¡ç†ä¾èµ–

```mermaid
erDiagram
NAVIGATION_MODE {
string my_days
string team
string project
}
VIEW_MODE {
string month
string week
string personal
}
MAIN_VIEW_MODE {
string calendar
string list
string stats
}
TASK_PERMISSION {
string ALL_MEMBERS
string CREATOR_ONLY
}
TEAM {
string id PK
string name
string description
string color
string organization_id
string creator_id
string task_permission
array member_ids
datetime created_at
}
PROJECT {
string id PK
string name
string description
string color
string organization_id
string creator_id
string task_permission
array member_ids
datetime created_at
}
USER {
string id PK
string username
string name
string avatar
string email
boolean is_admin
string default_team_id
number points
}
NAVIGATION_MODE ||--|| VIEW_MODE : "å½±å“"
NAVIGATION_MODE ||--|| MAIN_VIEW_MODE : "å½±å“"
TASK_PERMISSION ||--|| TEAM : "å®šä¹‰"
TASK_PERMISSION ||--|| PROJECT : "å®šä¹‰"
TEAM ||--o{ USER : "åŒ…å«"
PROJECT ||--o{ USER : "åŒ…å«"
```

**å›¾è¡¨æ¥æº**
- [types.ts](file://lib/types.ts#L127-L141)
- [types.ts](file://lib/types.ts#L84-L106)
- [types.ts](file://lib/types.ts#L108-L120)

**ç« èŠ‚æ¥æº**
- [calendar-store.ts](file://lib/store/calendar-store.ts#L33-L198)
- [types.ts](file://lib/types.ts#L127-L141)

## æ€§èƒ½è€ƒè™‘

### çŠ¶æ€ç®¡ç†ä¼˜åŒ–

1. **å±€éƒ¨çŠ¶æ€åˆ†ç¦»**ï¼šæ¯ä¸ªç»„ä»¶åªç®¡ç†å¿…è¦çš„çŠ¶æ€ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“
2. **æ‰¹é‡æ›´æ–°**ï¼šä½¿ç”¨Zustandçš„æ‰¹é‡æ›´æ–°æœºåˆ¶ï¼Œé¿å…é¢‘ç¹çš„çŠ¶æ€å˜æ›´
3. **æŒä¹…åŒ–å­˜å‚¨**ï¼šå…³é”®çŠ¶æ€é€šè¿‡localStorageæŒä¹…åŒ–ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

### æ•°æ®åŠ è½½ä¼˜åŒ–

1. **å¹¶å‘åŠ è½½**ï¼šä½¿ç”¨Promise.allå¹¶è¡ŒåŠ è½½ç”¨æˆ·ã€å›¢é˜Ÿå’Œé¡¹ç›®æ•°æ®
2. **å»¶è¿ŸåŠ è½½**ï¼šä»»åŠ¡æ•°æ®æ ¹æ®å¯¼èˆªæ¨¡å¼åŠ¨æ€åŠ è½½ï¼Œå‡å°‘åˆå§‹è´Ÿè½½
3. **ç¼“å­˜ç­–ç•¥**ï¼šåˆç†åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜å’Œæœ¬åœ°å­˜å‚¨

### æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–

1. **è™šæ‹Ÿæ»šåŠ¨**ï¼šå¯¹äºå¤§é‡ä»»åŠ¡çš„åœºæ™¯ï¼Œè€ƒè™‘å®ç°è™šæ‹Ÿæ»šåŠ¨
2. **é˜²æŠ–å¤„ç†**ï¼šå¯¹é¢‘ç¹è§¦å‘çš„æ“ä½œè¿›è¡Œé˜²æŠ–å¤„ç†
3. **æ¡ä»¶æ¸²æŸ“**ï¼šåªæ¸²æŸ“å¯è§åŒºåŸŸçš„å†…å®¹

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### æƒé™ç›¸å…³é—®é¢˜

**é—®é¢˜**ï¼šç”¨æˆ·æ— æ³•ç¼–è¾‘å›¢é˜Ÿæˆ–é¡¹ç›®
**åŸå› **ï¼šç”¨æˆ·ä¸æ˜¯åˆ›å»ºè€…ä¸”ä¸æ˜¯ç®¡ç†å‘˜
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ç”¨æˆ·è§’è‰²å’Œæƒé™
2. éªŒè¯åˆ›å»ºè€…èº«ä»½
3. ç¡®è®¤ç®¡ç†å‘˜æƒé™

#### æ•°æ®åŒæ­¥é—®é¢˜

**é—®é¢˜**ï¼šå¯¼èˆªçŠ¶æ€ä¸å®é™…æ•°æ®ä¸ä¸€è‡´
**åŸå› **ï¼šçŠ¶æ€é‡ç½®é€»è¾‘æˆ–APIè°ƒç”¨å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥fetchAllDataå‡½æ•°çš„æ‰§è¡Œ
2. éªŒè¯å¯¼èˆªçŠ¶æ€çš„æœ‰æ•ˆæ€§
3. ç¡®è®¤APIå“åº”çš„æ­£ç¡®æ€§

#### å“åº”å¼å¸ƒå±€é—®é¢˜

**é—®é¢˜**ï¼šç§»åŠ¨ç«¯æ˜¾ç¤ºå¼‚å¸¸
**åŸå› **ï¼šæ–­ç‚¹è®¾ç½®æˆ–CSSæ ·å¼é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥MOBILE_BREAKPOINTå¸¸é‡
2. éªŒè¯åª’ä½“æŸ¥è¯¢è§„åˆ™
3. æµ‹è¯•ä¸åŒå±å¹•å°ºå¯¸

**ç« èŠ‚æ¥æº**
- [calendar-store.ts](file://lib/store/calendar-store.ts#L488-L527)
- [sidebar.tsx](file://components/ui/sidebar.tsx#L69-L94)

## ç»“è®º

ä¾§è¾¹æ å¯¼èˆªç³»ç»Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ¶æ„æ¸…æ™°çš„ç»„ä»¶é›†åˆã€‚å®ƒé€šè¿‡åˆç†çš„çŠ¶æ€ç®¡ç†ã€æƒé™æ§åˆ¶å’Œå“åº”å¼è®¾è®¡ï¼Œä¸ºç”¨æˆ·æä¾›äº†æµç•…çš„å¯¼èˆªä½“éªŒã€‚ç³»ç»Ÿçš„ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šå„ç»„ä»¶èŒè´£æ˜ç¡®ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
2. **æƒé™å®‰å…¨**ï¼šå¤šå±‚æ¬¡çš„æƒé™æ§åˆ¶ç¡®ä¿æ•°æ®å®‰å…¨
3. **ç”¨æˆ·ä½“éªŒ**ï¼šæµç•…çš„äº¤äº’å’Œå“åº”å¼å¸ƒå±€
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šåˆç†çš„çŠ¶æ€ç®¡ç†å’Œæ•°æ®åŠ è½½ç­–ç•¥
5. **å¯æ‰©å±•æ€§**ï¼šæ¸…æ™°çš„æ¶æ„ä¸ºæœªæ¥åŠŸèƒ½æ‰©å±•å¥ å®šåŸºç¡€

è¯¥ç³»ç»Ÿä¸ºæ•´ä¸ªåº”ç”¨æä¾›äº†åšå®çš„å¯¼èˆªåŸºç¡€è®¾æ–½ï¼Œæ˜¯æ„å»ºå¤æ‚ä»»åŠ¡ç®¡ç†åº”ç”¨çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚