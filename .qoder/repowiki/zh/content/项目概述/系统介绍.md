# ç³»ç»Ÿä»‹ç»

<cite>
**æœ¬æ–‡å¼•ç”¨çš„æ–‡ä»¶**
- [README.md](file://README.md)
- [package.json](file://package.json)
- [app/layout.tsx](file://app/layout.tsx)
- [app/page.tsx](file://app/page.tsx)
- [lib/types.ts](file://lib/types.ts)
- [lib/store/calendar-store.ts](file://lib/store/calendar-store.ts)
- [lib/site-config.ts](file://lib/site-config.ts)
- [components/calendar/calendar-header.tsx](file://components/calendar/calendar-header.tsx)
- [components/calendar/month-view.tsx](file://components/calendar/month-view.tsx)
- [components/calendar/week-view.tsx](file://components/calendar/week-view.tsx)
- [components/calendar/personal-week-view.tsx](file://components/calendar/personal-week-view.tsx)
- [components/views/list-view.tsx](file://components/views/list-view.tsx)
- [components/views/stats-view.tsx](file://components/views/stats-view.tsx)
- [app/api/tasks/route.ts](file://app/api/tasks/route.ts)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–å…³ç³»åˆ†æ](#ä¾èµ–å…³ç³»åˆ†æ)
7. [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
8. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)

## ç®€ä»‹

OxHorse Planner æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ç°ä»£åŒ–æ—¥å†ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œä¸“ä¸ºæå‡ä¸ªäººã€å›¢é˜Ÿå’Œé¡¹ç›®çš„å·¥ä½œæ•ˆç‡è€Œè®¾è®¡ã€‚è¯¥ç³»ç»ŸåŸºäº Next.js 16+ å’Œ React 19+ æ„å»ºï¼Œé‡‡ç”¨ TypeScript æä¾›ç±»å‹å®‰å…¨ä¿éšœï¼Œæ”¯æŒå¤šè§†å›¾æ—¥å†ç³»ç»Ÿã€æ™ºèƒ½ä»»åŠ¡ç®¡ç†ã€å›¢é˜Ÿåä½œå’Œä¸°å¯Œçš„å¯è§†åŒ–åŠŸèƒ½ã€‚

### æ ¸å¿ƒä»·å€¼ä¸»å¼ 

**ç»Ÿä¸€å·¥ä½œå¹³å°**ï¼šå°†ä¼ ç»Ÿçš„æ—¥å†åº”ç”¨å‡çº§ä¸ºç»¼åˆæ€§çš„ä»»åŠ¡ç®¡ç†å¹³å°ï¼Œè®©ç”¨æˆ·åœ¨ä¸€ä¸ªç•Œé¢ä¸­å®Œæˆæ‰€æœ‰å·¥ä½œå®‰æ’ã€‚

**å¤šç»´åº¦è§†å›¾åˆ‡æ¢**ï¼šæä¾›æœˆè§†å›¾ã€å‘¨è§†å›¾å’Œä¸ªäººå‘¨è§†å›¾ä¸‰ç§æ ¸å¿ƒè§†å›¾æ¨¡å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„ä»»åŠ¡ç®¡ç†éœ€æ±‚ã€‚

**æ™ºèƒ½åä½œä½“éªŒ**ï¼šæ”¯æŒå›¢é˜Ÿåä½œã€é¡¹ç›®ç®¡ç†å’Œæƒé™æ§åˆ¶ï¼Œç¡®ä¿ä¿¡æ¯å…±äº«çš„åŒæ—¶ä¿æŠ¤æ•°æ®å®‰å…¨ã€‚

**ç›´è§‚çš„äº¤äº’è®¾è®¡**ï¼šé€šè¿‡æ‹–æ‹½æ“ä½œã€å®æ—¶é¢„è§ˆå’Œæµç•…åŠ¨ç”»ï¼Œæä¾›ç°ä»£åŒ–çš„ç”¨æˆ·ä½“éªŒã€‚

### è®¾è®¡ç†å¿µ

ç³»ç»Ÿé‡‡ç”¨"ä»¥ä»»åŠ¡ä¸ºä¸­å¿ƒ"çš„è®¾è®¡ç†å¿µï¼Œå°†ä¼ ç»Ÿçš„æ—¥å†æ¦‚å¿µæ‰©å±•ä¸ºä»»åŠ¡è°ƒåº¦å¹³å°ã€‚é€šè¿‡æ™ºèƒ½å¸ƒå±€ç®—æ³•å’Œå¤šè§†å›¾åˆ‡æ¢æœºåˆ¶ï¼Œç”¨æˆ·å¯ä»¥çµæ´»é€‰æ‹©æœ€é€‚åˆå½“å‰å·¥ä½œåœºæ™¯çš„è§†å›¾æ¨¡å¼ã€‚

### ç›®æ ‡ç”¨æˆ·ç¾¤ä½“

- **ä¸ªäººç”¨æˆ·**ï¼šéœ€è¦ç®¡ç†ä¸ªäººäº‹åŠ¡ã€å­¦ä¹ è®¡åˆ’å’Œç”Ÿæ´»å®‰æ’çš„ç”¨æˆ·
- **å›¢é˜Ÿç®¡ç†è€…**ï¼šéœ€è¦åè°ƒå›¢é˜Ÿæˆå‘˜ä»»åŠ¡åˆ†é…å’Œè¿›åº¦è·Ÿè¸ªçš„ç®¡ç†è€…
- **é¡¹ç›®ç»ç†**ï¼šéœ€è¦ç»Ÿç­¹é¡¹ç›®è¿›åº¦ã€èµ„æºåˆ†é…å’Œé‡Œç¨‹ç¢‘ç®¡ç†çš„é¡¹ç›®è´Ÿè´£äºº
- **ä¼ä¸šç”¨æˆ·**ï¼šå¯»æ±‚ç»Ÿä¸€å·¥ä½œå¹³å°æ¥æå‡æ•´ä½“å·¥ä½œæ•ˆç‡çš„ç»„ç»‡

## é¡¹ç›®ç»“æ„

ç³»ç»Ÿé‡‡ç”¨ç°ä»£å‰ç«¯æ¶æ„ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å±‚æ¬¡ï¼š

```mermaid
graph TB
subgraph "å‰ç«¯å±‚"
UI[ç”¨æˆ·ç•Œé¢ç»„ä»¶]
Store[çŠ¶æ€ç®¡ç†]
Utils[å·¥å…·å‡½æ•°]
end
subgraph "åº”ç”¨å±‚"
Layout[æ ¹å¸ƒå±€]
Page[ä¸»é¡µé¢]
Views[è§†å›¾ç»„ä»¶]
end
subgraph "APIå±‚"
Tasks[ä»»åŠ¡API]
Auth[è®¤è¯API]
Org[ç»„ç»‡API]
end
subgraph "æ•°æ®å±‚"
Prisma[ORMå±‚]
PostgreSQL[æ•°æ®åº“]
end
UI --> Store
Store --> Views
Views --> Tasks
Tasks --> Prisma
Prisma --> PostgreSQL
```

**å›¾è¡¨æ¥æº**
- [app/layout.tsx](file://app/layout.tsx#L1-L45)
- [app/page.tsx](file://app/page.tsx#L1-L234)
- [lib/store/calendar-store.ts](file://lib/store/calendar-store.ts#L1-L800)

### æŠ€æœ¯æ ˆç‰¹è‰²

- **Next.js 16.0.1**ï¼šæ”¯æŒ App Router å’Œ Turbopackï¼Œæä¾›æœ€ä½³çš„å¼€å‘ä½“éªŒ
- **React 19.0.2**ï¼šæœ€æ–° React ç‰ˆæœ¬ï¼Œæ”¯æŒå¹¶å‘ç‰¹æ€§
- **TypeScript 5**ï¼šæä¾›å®Œæ•´çš„ç±»å‹å®‰å…¨ä¿éšœ
- **Zustand 5.0.3**ï¼šè½»é‡çº§çŠ¶æ€ç®¡ç†ï¼Œæ›¿ä»£ Redux
- **Tailwind CSS 4.1.16**ï¼šå®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- **Radix UI**ï¼šæ— æ ·å¼çš„å¯è®¿é—®ç»„ä»¶åº“
- **PostgreSQL + Prisma**ï¼šä¸‹ä¸€ä»£ ORMï¼Œæä¾›å¼ºå¤§çš„æ•°æ®ç®¡ç†èƒ½åŠ›

**ç« èŠ‚æ¥æº**
- [README.md](file://README.md#L81-L104)
- [package.json](file://package.json#L1-L75)

## æ ¸å¿ƒç»„ä»¶

### å¤šè§†å›¾æ—¥å†ç³»ç»Ÿ

ç³»ç»Ÿæä¾›ä¸‰ç§æ ¸å¿ƒè§†å›¾æ¨¡å¼ï¼Œæ¯ç§è§†å›¾éƒ½æœ‰å…¶ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ï¼š

**æœˆè§†å›¾ (Month View)**
- å±•ç¤ºæ•´ä¸ªæœˆçš„ä»»åŠ¡å®‰æ’
- æ”¯æŒè·¨å¤©ä»»åŠ¡çš„æ™ºèƒ½å¸ƒå±€
- é€‚åˆå®è§‚ä»»åŠ¡è§„åˆ’å’Œæ—¶é—´å®‰æ’

**å‘¨è§†å›¾ (Week View)**
- **ä¸ªäººå‘¨è§†å›¾**ï¼šå•è¡Œæ˜¾ç¤ºä¸ªäººä»»åŠ¡ï¼Œè‡ªåŠ¨è®¡ç®—è¡Œé«˜
- **å›¢é˜Ÿå‘¨è§†å›¾**ï¼šå¤šè¡Œæ˜¾ç¤ºå›¢é˜Ÿæˆå‘˜ä»»åŠ¡ï¼Œæ¯äººä¸€è¡Œ
- é€‚åˆè¯¦ç»†çš„ä»»åŠ¡å®‰æ’å’Œè¿›åº¦è·Ÿè¸ª

**æ™ºèƒ½å¯¼èˆª**
- My Daysï¼ˆä¸ªäººï¼‰/ My Teamsï¼ˆå›¢é˜Ÿï¼‰/ My Projectsï¼ˆé¡¹ç›®ï¼‰ä¸‰çº§å¯¼èˆª
- å®æ—¶åˆ‡æ¢è§†å›¾æ¨¡å¼å’Œå¯¼èˆªæ¨¡å¼
- æ•°æ®å®æ—¶è¿‡æ»¤å’Œæ›´æ–°

### ä»»åŠ¡ç®¡ç†åŠŸèƒ½

**æ‹–æ‹½æ“ä½œ**
- æ‹–æ‹½åˆ›å»ºï¼šåœ¨æ—¥å†ä¸Šæ‹–æ‹½é€‰æ‹©æ—¥æœŸèŒƒå›´å¿«é€Ÿåˆ›å»ºä»»åŠ¡
- æ‹–æ‹½ç§»åŠ¨ï¼šç›´æ¥æ‹–æ‹½ä»»åŠ¡æ¡è°ƒæ•´æ—¥æœŸï¼Œå®æ—¶é¢„è§ˆæ— å ä½ç¬¦
- è¿›åº¦è°ƒæ•´ï¼šç›´æ¥åœ¨ä»»åŠ¡æ¡ä¸Šæ‹–æ‹½è°ƒæ•´è¿›åº¦ï¼ˆ0-100%ï¼‰

**ä»»åŠ¡ç±»å‹**
- ğŸ“‹ æ—¥å¸¸ä»»åŠ¡ (Daily) - è“è‰²
- ğŸ“ ä¼šè®® (Meeting) - é»„è‰²  
- ğŸ–ï¸ ä¼‘å‡ (Vacation) - çº¢è‰²

**è·¨å¤©ä»»åŠ¡å¤„ç†**
- è‡ªåŠ¨è®¡ç®—ä»»åŠ¡è·¨åº¦
- æ”¯æŒå‘¨æˆªæ–­æ˜¾ç¤º
- æ™ºèƒ½å¸ƒå±€é¿å…ä»»åŠ¡é‡å 

### å›¢é˜Ÿåä½œç³»ç»Ÿ

**å›¢é˜Ÿç®¡ç†**
- åˆ›å»ºå›¢é˜Ÿï¼Œè®¾ç½®åç§°ã€æè¿°ã€é¢œè‰²
- å¤šé€‰æˆå‘˜æ·»åŠ åˆ°å›¢é˜Ÿ
- æŸ¥çœ‹å›¢é˜Ÿæ‰€æœ‰æˆå‘˜çš„ä»»åŠ¡
- é»˜è®¤å›¢é˜Ÿï¼šç”¨æˆ·å¯è®¾ç½®é»˜è®¤å›¢é˜Ÿï¼Œç™»å½•åè‡ªåŠ¨æ ‡è®°

**é¡¹ç›®ç®¡ç†**
- åˆ›å»ºé¡¹ç›®ï¼Œå…³è”å›¢é˜Ÿï¼ˆå¯é€‰ï¼‰
- å¤šé€‰é¡¹ç›®æˆå‘˜
- æŸ¥çœ‹é¡¹ç›®æ‰€æœ‰æˆå‘˜çš„ä»»åŠ¡

**æƒé™æ§åˆ¶**
- My Daysï¼šä»…æ˜¾ç¤ºä¸ªäººä»»åŠ¡
- Team æ¨¡å¼ï¼šæ˜¾ç¤ºå›¢é˜Ÿæ‰€æœ‰æˆå‘˜ä»»åŠ¡
- Project æ¨¡å¼ï¼šæ˜¾ç¤ºé¡¹ç›®æ‰€æœ‰æˆå‘˜ä»»åŠ¡

**æˆå‘˜ä¿¡æ¯å±•ç¤º**
- æœˆè§†å›¾ä»»åŠ¡æ¡æ˜¾ç¤ºè´Ÿè´£äººå¤´åƒ+å§“å
- å‘¨è§†å›¾é€šè¿‡è¡ŒåŒºåˆ†æˆå‘˜
- DiceBear API ç”Ÿæˆä¸ªæ€§åŒ–å¤´åƒ

**ç« èŠ‚æ¥æº**
- [README.md](file://README.md#L7-L80)

## æ¶æ„æ¦‚è§ˆ

ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œå‰ç«¯ä½¿ç”¨ Next.js æ„å»ºï¼Œåç«¯é€šè¿‡ API è·¯ç”±æä¾›æœåŠ¡ã€‚

```mermaid
sequenceDiagram
participant Client as "å®¢æˆ·ç«¯æµè§ˆå™¨"
participant Frontend as "å‰ç«¯åº”ç”¨"
participant Store as "çŠ¶æ€ç®¡ç†"
participant API as "APIè·¯ç”±"
participant DB as "æ•°æ®åº“"
Client->>Frontend : ç”¨æˆ·è®¿é—®åº”ç”¨
Frontend->>Store : åˆå§‹åŒ–çŠ¶æ€
Store->>API : è¯·æ±‚æ•°æ®
API->>DB : æŸ¥è¯¢ä»»åŠ¡/ç”¨æˆ·/é¡¹ç›®
DB-->>API : è¿”å›æ•°æ®
API-->>Store : è¿”å›å¤„ç†åçš„æ•°æ®
Store-->>Frontend : æ›´æ–°UIçŠ¶æ€
Frontend-->>Client : æ¸²æŸ“ç•Œé¢
Note over Client,DB : ç”¨æˆ·æ“ä½œè§¦å‘æ•°æ®æ›´æ–°
Client->>Frontend : æ‹–æ‹½/ç‚¹å‡»æ“ä½œ
Frontend->>Store : è§¦å‘çŠ¶æ€å˜æ›´
Store->>API : å‘é€æ›´æ–°è¯·æ±‚
API->>DB : æ‰§è¡Œæ•°æ®åº“æ“ä½œ
DB-->>API : ç¡®è®¤æ“ä½œç»“æœ
API-->>Store : è¿”å›æ“ä½œç»“æœ
Store-->>Frontend : æ›´æ–°ç•Œé¢çŠ¶æ€
```

**å›¾è¡¨æ¥æº**
- [app/page.tsx](file://app/page.tsx#L26-L234)
- [lib/store/calendar-store.ts](file://lib/store/calendar-store.ts#L455-L546)
- [app/api/tasks/route.ts](file://app/api/tasks/route.ts#L18-L273)

### æ•°æ®æµè®¾è®¡

ç³»ç»Ÿé‡‡ç”¨å•å‘æ•°æ®æµè®¾è®¡ï¼Œç¡®ä¿çŠ¶æ€çš„ä¸€è‡´æ€§å’Œå¯é¢„æµ‹æ€§ï¼š

1. **åˆå§‹åŒ–é˜¶æ®µ**ï¼šåº”ç”¨å¯åŠ¨æ—¶åŠ è½½ç”¨æˆ·ä¿¡æ¯å’ŒåŸºç¡€æ•°æ®
2. **ç”¨æˆ·äº¤äº’**ï¼šç”¨æˆ·é€šè¿‡ç•Œé¢æ“ä½œè§¦å‘çŠ¶æ€å˜æ›´
3. **çŠ¶æ€æ›´æ–°**ï¼šZustand çŠ¶æ€ç®¡ç†å™¨æ›´æ–°åº”ç”¨çŠ¶æ€
4. **æ•°æ®åŒæ­¥**ï¼šå¼‚æ­¥ä¸åç«¯ API åŒæ­¥æ•°æ®å˜æ›´
5. **ç•Œé¢æ¸²æŸ“**ï¼šReact ç»„ä»¶æ ¹æ®çŠ¶æ€å˜åŒ–é‡æ–°æ¸²æŸ“

**ç« èŠ‚æ¥æº**
- [lib/store/calendar-store.ts](file://lib/store/calendar-store.ts#L200-L270)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### çŠ¶æ€ç®¡ç†æ¶æ„

ç³»ç»Ÿä½¿ç”¨ Zustand ä½œä¸ºçŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæä¾›äº†è½»é‡çº§ä½†åŠŸèƒ½å¼ºå¤§çš„çŠ¶æ€ç®¡ç†èƒ½åŠ›ã€‚

```mermaid
classDiagram
class CalendarStore {
+tasks : Task[]
+projects : Project[]
+users : User[]
+teams : Team[]
+currentUser : User
+isLoadingTasks : boolean
+isLoadingProjects : boolean
+isLoadingUsers : boolean
+isLoadingTeams : boolean
+error : string
+mainViewMode : MainViewMode
+listGroupMode : ListGroupMode
+listLayoutColumns : ListLayoutColumns
+viewMode : ViewMode
+navigationMode : NavigationMode
+selectedTeamId : string
+selectedProjectId : string
+currentDate : Date
+selectedDate : Date
+selectedProjectIds : string[]
+hideWeekends : boolean
+taskBarSize : "compact"|"comfortable"
+dragState : DragState
+dragMoveState : DragMoveState
+taskCreation : TaskCreation
+taskEdit : TaskEdit
+hoveredTaskId : string
+settings : CalendarSettings
+fetchAllData() Promise~void~
+addTask(task) Promise~void~
+updateTask(id, task) Promise~void~
+deleteTask(id) Promise~void~
+setMainViewMode(mode) void
+setViewMode(mode) void
+setNavigationMode(mode) void
+startDragCreate(date, cell, userId) void
+updateDragCreate(date) void
+endDragCreate() Date
+openTaskCreation(startDate, endDate, userId) void
+openTaskEdit(task) void
}
class DragState {
+isCreating : boolean
+startDate : Date
+endDate : Date
+startCell : Cell
+userId : string
}
class DragMoveState {
+isMoving : boolean
+task : Task
+startDate : Date
+offsetDays : number
}
class TaskCreation {
+isOpen : boolean
+startDate : Date
+endDate : Date
+userId : string
+projectId : string
+teamId : string
}
CalendarStore --> DragState : "åŒ…å«"
CalendarStore --> DragMoveState : "åŒ…å«"
CalendarStore --> TaskCreation : "åŒ…å«"
```

**å›¾è¡¨æ¥æº**
- [lib/store/calendar-store.ts](file://lib/store/calendar-store.ts#L33-L198)

### è§†å›¾ç»„ä»¶ä½“ç³»

ç³»ç»Ÿå®ç°äº†å®Œæ•´çš„è§†å›¾ç»„ä»¶ä½“ç³»ï¼Œæ”¯æŒå¤šç§è§†å›¾æ¨¡å¼çš„æ— ç¼åˆ‡æ¢ã€‚

```mermaid
graph TD
subgraph "ä¸»è§†å›¾"
Calendar[æ—¥å†è§†å›¾]
List[æ¸…å•è§†å›¾]
Stats[ç»Ÿè®¡è§†å›¾]
end
subgraph "æ—¥å†è§†å›¾å­ç»„ä»¶"
Header[æ—¥å†å¤´éƒ¨]
MonthView[æœˆè§†å›¾]
WeekView[å›¢é˜Ÿå‘¨è§†å›¾]
PersonalWeekView[ä¸ªäººå‘¨è§†å›¾]
end
subgraph "æ¸…å•è§†å›¾å­ç»„ä»¶"
ListView[ä»»åŠ¡æ¸…å•]
ListGroupToggle[åˆ†ç»„åˆ‡æ¢]
ListLayoutToggle[å¸ƒå±€åˆ‡æ¢]
end
subgraph "ç»Ÿè®¡è§†å›¾å­ç»„ä»¶"
StatsView[ç»Ÿè®¡é¢æ¿]
end
Calendar --> Header
Calendar --> MonthView
Calendar --> WeekView
Calendar --> PersonalWeekView
List --> ListView
List --> ListGroupToggle
List --> ListLayoutToggle
Stats --> StatsView
```

**å›¾è¡¨æ¥æº**
- [app/page.tsx](file://app/page.tsx#L103-L145)
- [components/calendar/calendar-header.tsx](file://components/calendar/calendar-header.tsx#L12-L127)
- [components/views/list-view.tsx](file://components/views/list-view.tsx#L22-L374)
- [components/views/stats-view.tsx](file://components/views/stats-view.tsx#L12-L309)

### API æœåŠ¡æ¶æ„

ç³»ç»Ÿé€šè¿‡ Next.js App Router æä¾› RESTful API æœåŠ¡ï¼Œæ”¯æŒå®Œæ•´çš„ CRUD æ“ä½œã€‚

```mermaid
flowchart TD
Request[HTTP è¯·æ±‚] --> Auth[è®¤è¯æ£€æŸ¥]
Auth --> Validation[å‚æ•°éªŒè¯]
Validation --> Route{è·¯ç”±åˆ†å‘}
Route --> |GET /api/tasks| GetTasks[è·å–ä»»åŠ¡åˆ—è¡¨]
Route --> |POST /api/tasks| CreateTask[åˆ›å»ºä»»åŠ¡]
Route --> |PUT /api/tasks/:id| UpdateTask[æ›´æ–°ä»»åŠ¡]
Route --> |DELETE /api/tasks/:id| DeleteTask[åˆ é™¤ä»»åŠ¡]
GetTasks --> Filter[æƒé™è¿‡æ»¤]
Filter --> Query[æ•°æ®åº“æŸ¥è¯¢]
Query --> Response[è¿”å›æ•°æ®]
CreateTask --> Permission[æƒé™æ£€æŸ¥]
Permission --> Transaction[æ•°æ®åº“äº‹åŠ¡]
Transaction --> Notification[å‘é€é€šçŸ¥]
Notification --> Response
UpdateTask --> Permission
Permission --> Transaction
Transaction --> Response
DeleteTask --> Permission
Permission --> Transaction
Transaction --> Response
```

**å›¾è¡¨æ¥æº**
- [app/api/tasks/route.ts](file://app/api/tasks/route.ts#L18-L497)

**ç« èŠ‚æ¥æº**
- [lib/store/calendar-store.ts](file://lib/store/calendar-store.ts#L200-L800)
- [app/api/tasks/route.ts](file://app/api/tasks/route.ts#L18-L273)

## ä¾èµ–å…³ç³»åˆ†æ

ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå„ç»„ä»¶ä¹‹é—´ä¿æŒä½è€¦åˆé«˜å†…èšçš„å…³ç³»ã€‚

```mermaid
graph LR
subgraph "æ ¸å¿ƒä¾èµ–"
React[React 19.2.3]
NextJS[Next.js 16.1.1]
TS[TypeScript 5]
Zustand[Zustand 5.0.3]
end
subgraph "UIæ¡†æ¶"
Tailwind[Tailwind CSS 4.1.16]
Radix[Radix UI]
Lucide[Lucide React 0.454.0]
end
subgraph "å·¥å…·åº“"
DateFns[date-fns 4.1.0]
Immer[Immer]
Axios[Axios]
end
subgraph "æ•°æ®åº“"
Prisma[Prisma 6.19.0]
Postgres[PostgreSQL]
end
React --> Zustand
NextJS --> React
TS --> React
Zustand --> React
Tailwind --> React
Radix --> React
Lucide --> React
DateFns --> React
Immer --> Zustand
Axios --> React
Prisma --> Postgres
```

**å›¾è¡¨æ¥æº**
- [package.json](file://package.json#L11-L75)

### ç»„ä»¶ä¾èµ–å…³ç³»

ç³»ç»Ÿç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»æ¸…æ™°æ˜ç¡®ï¼Œéµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼š

- **é¡µé¢ç»„ä»¶**ï¼šä¾èµ–äºçŠ¶æ€ç®¡ç†å™¨å’Œè§†å›¾ç»„ä»¶
- **è§†å›¾ç»„ä»¶**ï¼šä¾èµ–äºå·¥å…·å‡½æ•°å’Œæ•°æ®æ¨¡å‹
- **å·¥å…·å‡½æ•°**ï¼šæä¾›é€šç”¨çš„åŠŸèƒ½æ”¯æŒ
- **çŠ¶æ€ç®¡ç†**ï¼šé›†ä¸­ç®¡ç†åº”ç”¨çŠ¶æ€

**ç« èŠ‚æ¥æº**
- [package.json](file://package.json#L11-L75)

## æ€§èƒ½è€ƒè™‘

ç³»ç»Ÿåœ¨è®¾è®¡æ—¶å……åˆ†è€ƒè™‘äº†æ€§èƒ½ä¼˜åŒ–ï¼Œé‡‡ç”¨äº†å¤šç§ç­–ç•¥æ¥æå‡ç”¨æˆ·ä½“éªŒï¼š

### çŠ¶æ€ç®¡ç†ä¼˜åŒ–
- ä½¿ç”¨ Zustand æ›¿ä»£ Reduxï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“
- é‡‡ç”¨åˆ†ç‰‡çŠ¶æ€ç®¡ç†ï¼Œé¿å…å…¨å±€çŠ¶æ€æ›´æ–°
- å®ç°çŠ¶æ€æŒä¹…åŒ–ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

### æ•°æ®åŠ è½½ä¼˜åŒ–
- å®ç°æ‡’åŠ è½½å’ŒæŒ‰éœ€åŠ è½½
- ä½¿ç”¨ç¼“å­˜ç­–ç•¥å‡å°‘é‡å¤è¯·æ±‚
- ä¼˜åŒ–æ•°æ®ç»“æ„ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡

### UIæ¸²æŸ“ä¼˜åŒ–
- å®ç°è™šæ‹Ÿæ»šåŠ¨ï¼Œå¤„ç†å¤§é‡æ•°æ®
- é‡‡ç”¨é˜²æŠ–å’ŒèŠ‚æµæŠ€æœ¯
- ä¼˜åŒ–é‡æ’é‡ç»˜ï¼Œæå‡æ¸²æŸ“æ€§èƒ½

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

**è®¤è¯å¤±è´¥**
- æ£€æŸ¥æœ¬åœ°å­˜å‚¨ä¸­çš„ç”¨æˆ·ä¿¡æ¯å’Œ token
- ç¡®è®¤æœåŠ¡å™¨ç«¯è®¤è¯æœåŠ¡æ­£å¸¸è¿è¡Œ
- éªŒè¯ç”¨æˆ·æƒé™å’Œç»„ç»‡æˆå‘˜èº«ä»½

**æ•°æ®åŠ è½½å¼‚å¸¸**
- æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œ API æœåŠ¡çŠ¶æ€
- éªŒè¯æ•°æ®åº“è¿æ¥å’ŒæŸ¥è¯¢è¯­å¥
- æŸ¥çœ‹æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çš„é”™è¯¯ä¿¡æ¯

**è§†å›¾æ¸²æŸ“é—®é¢˜**
- ç¡®è®¤çŠ¶æ€ç®¡ç†å™¨ä¸­çš„æ•°æ®å®Œæ•´æ€§
- æ£€æŸ¥ç»„ä»¶çš„ props ä¼ é€’
- éªŒè¯ CSS æ ·å¼å†²çª

**ç« èŠ‚æ¥æº**
- [lib/store/calendar-store.ts](file://lib/store/calendar-store.ts#L320-L342)
- [app/page.tsx](file://app/page.tsx#L79-L92)

## ç»“è®º

OxHorse Planner ä½œä¸ºä¸€ä¸ªç°ä»£åŒ–çš„æ—¥å†ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œåœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¡¨ç°å‡ºè‰²ï¼š

**æŠ€æœ¯åˆ›æ–°**ï¼šé‡‡ç”¨æœ€æ–°çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œæä¾›ä¼˜ç§€çš„å¼€å‘ä½“éªŒå’Œç”¨æˆ·ä½“éªŒã€‚

**åŠŸèƒ½å®Œå–„**ï¼šæ¶µç›–ä¸ªäººã€å›¢é˜Ÿå’Œé¡¹ç›®ç®¡ç†çš„å…¨æ–¹ä½éœ€æ±‚ï¼Œæ”¯æŒå¤šè§†å›¾åˆ‡æ¢å’Œæ™ºèƒ½åä½œã€‚

**æ¶æ„åˆç†**ï¼šé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡å’Œæ¸…æ™°çš„ä¾èµ–å…³ç³»ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚

**æ€§èƒ½ä¼˜ç§€**ï¼šé€šè¿‡å¤šç§ä¼˜åŒ–ç­–ç•¥ï¼Œç¡®ä¿ç³»ç»Ÿçš„é«˜æ•ˆè¿è¡Œã€‚

è¯¥ç³»ç»Ÿç‰¹åˆ«é€‚åˆéœ€è¦ç»Ÿä¸€å·¥ä½œå¹³å°çš„ä¼ä¸šå’Œä¸ªäººç”¨æˆ·ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡å·¥ä½œæ•ˆç‡å’Œåä½œè´¨é‡ã€‚é€šè¿‡æŒç»­çš„åŠŸèƒ½è¿­ä»£å’ŒæŠ€æœ¯ä¼˜åŒ–ï¼ŒOxHorse Planner æœ‰æœ›æˆä¸ºæ—¥å†ä»»åŠ¡ç®¡ç†é¢†åŸŸçš„æ ‡æ†äº§å“ã€‚