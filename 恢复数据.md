恢复数据
# 1. 先检查数据库是否存在
docker exec -i calendar-postgres psql -U postgres -c "\l"

# 2. 如果 calendar_tasks 存在,先备份当前数据(可选)
docker exec calendar-postgres pg_dump -U postgres calendar_tasks > /opt/calendar-task-manager/backups/before_restore_$(date +%Y%m%d_%H%M%S).sql

# 3. 停止应用容器
docker stop calendar-app

# 4. 删除现有数据库
docker exec -i calendar-postgres psql -U postgres -c "DROP DATABASE IF EXISTS calendar_tasks;"

# 5. 创建新数据库
docker exec -i calendar-postgres psql -U postgres -c "CREATE DATABASE calendar_tasks;"

# 6. 还原备份
docker exec -i calendar-postgres psql -U postgres -d calendar_tasks < /opt/calendar-task-manager/backups/calendar_tasks_backup_20251130_125213.sql

# 7. 启动应用容器
docker start calendar-app

# 8. 等待应用启动
sleep 10

# 9. 检查容器状态
docker ps | grep calendar

# 10. 查看应用日志
docker logs --tail 30 calendar-app