ç»„ç»‡ 1: ç‰›é©¬ç§‘æŠ€æœ‰é™å…¬å¸

âœ… 6 ä¸ªç”¨æˆ·ï¼ˆAlice, Bob, Carol, David, Emma, Frankï¼‰
âœ… 3 ä¸ªå›¢é˜Ÿï¼ˆå‰ç«¯å¼€å‘å›¢é˜Ÿã€è®¾è®¡å›¢é˜Ÿã€åç«¯å¼€å‘å›¢é˜Ÿï¼‰å„æœ‰åˆ›å»ºè€…
âœ… 4 ä¸ªé¡¹ç›®ï¼ˆç”µå•†å¹³å°é‡æ„ã€ç§»åŠ¨ç«¯é€‚é…ã€APIæœåŠ¡å‡çº§ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼‰å„æœ‰åˆ›å»ºè€…
âœ… 34 ä¸ªä»»åŠ¡ï¼ˆåŒ…æ‹¬æ—¥å¸¸ä»»åŠ¡ã€ä¼šè®®ã€ä¼‘å‡ï¼‰
ç»„ç»‡ 2: å§å•¦å§å•¦å°é­”ä»™ç§‘æŠ€

âœ… 6 ä¸ªç”¨æˆ·ï¼ˆGrace, Henry, Iris, Jack, Kate, Leoï¼‰
âœ… 3 ä¸ªå›¢é˜Ÿï¼ˆäº§å“ç ”å‘å›¢é˜Ÿã€è¿è¥å›¢é˜Ÿã€æŠ€æœ¯æ”¯æŒå›¢é˜Ÿï¼‰å„æœ‰åˆ›å»ºè€…
âœ… 3 ä¸ªé¡¹ç›®ï¼ˆæ–°äº§å“å¼€å‘ã€æ•°æ®åˆ†æå¹³å°ã€å®¢æˆ·ç®¡ç†ç³»ç»Ÿï¼‰å„æœ‰åˆ›å»ºè€…
âœ… 29 ä¸ªä»»åŠ¡ï¼ˆåŒ…æ‹¬æ—¥å¸¸ä»»åŠ¡ã€ä¼šè®®ã€ä¼‘å‡ï¼‰
ä»»åŠ¡ç±»å‹åˆ†å¸ƒï¼š

ğŸ“ æ—¥å¸¸ä»»åŠ¡ï¼ˆdailyï¼‰ï¼šé¡¹ç›®æ—¥å¸¸å¼€å‘ã€å›¢é˜Ÿåä½œã€é•¿æœŸä»»åŠ¡
ğŸ“… ä¼šè®®ï¼ˆmeetingï¼‰ï¼šé¡¹ç›®è¿›åº¦ä¼šè®®ã€å›¢é˜Ÿä¾‹ä¼š
ğŸ–ï¸ ä¼‘å‡ï¼ˆvacationï¼‰ï¼šç”¨æˆ·å¹´å‡
æ‰€æœ‰ç”¨æˆ·çš„ç™»å½•å¯†ç éƒ½æ˜¯ï¼š123456

ç°åœ¨ä½ å¯ä»¥ï¼š

ä½¿ç”¨ä»»æ„æµ‹è¯•ç”¨æˆ·ç™»å½•ï¼ˆä¾‹å¦‚ alice_dev / 123456ï¼‰
åˆ‡æ¢ä¸åŒçš„ç©ºé—´æŸ¥çœ‹æ•°æ®
æŸ¥çœ‹å›¢é˜Ÿã€é¡¹ç›®å’Œä»»åŠ¡
éªŒè¯åˆ›å»ºè€…å…³ç³»æ˜¯å¦æ­£ç¡®æ˜¾ç¤º



é¡¹ç›®(Project)å’Œå›¢é˜Ÿ(Team)ç¡®å®æ˜¯å¹³çº§çš„ç»„ç»‡ç»“æ„ï¼Œéƒ½ç›´æ¥å±äºç»„ç»‡(Organization)ï¼Œä¸éœ€è¦é¡¹ç›®å½’å±äºå›¢é˜Ÿçš„å±‚çº§å…³ç³»ã€‚

å½“å‰çš„å®ç°æ˜¯æ­£ç¡®çš„ï¼š

âœ… é¡¹ç›®å’Œå›¢é˜Ÿéƒ½æœ‰ organizationId å­—æ®µ
âœ… é¡¹ç›®å’Œå›¢é˜Ÿéƒ½æœ‰ç‹¬ç«‹çš„æˆå‘˜ç®¡ç†(memberIds)
âœ… é¡¹ç›®å’Œå›¢é˜Ÿéƒ½æœ‰ç‹¬ç«‹çš„åˆ›å»ºè€…å’ŒååŒæƒé™è®¾ç½®
âœ… ç§»é™¤äº†ä¸å­˜åœ¨çš„ teamId å­—æ®µåŠç›¸å…³ UI
ç°åœ¨çš„æ¶æ„æ›´åŠ æ¸…æ™°å’Œçµæ´»ï¼Œç”¨æˆ·å¯ä»¥ï¼š

åˆ›å»ºå›¢é˜Ÿæ¥ç»„ç»‡æˆå‘˜
åˆ›å»ºé¡¹ç›®æ¥ç®¡ç†ä»»åŠ¡
å›¢é˜Ÿå’Œé¡¹ç›®å¯ä»¥æœ‰ä¸åŒçš„æˆå‘˜ç»„åˆ
ä»»åŠ¡å¯ä»¥åˆ†é…ç»™é¡¹ç›®æˆ–å›¢é˜Ÿçš„æˆå‘˜


æœ¬åœ°æ‰§è¡Œ:

# 1. æ„å»ºé•œåƒ
docker build -t calendar-task-manager:latest .

# 2. å¯¼å‡ºé•œåƒ
docker save -o calendar-app.tar calendar-task-manager:latest

# 3. ä¸Šä¼ åˆ°æœåŠ¡å™¨ (ä½¿ç”¨ FileZilla æˆ– SCP)
scp calendar-app.tar root@ä½ çš„æœåŠ¡å™¨IP:/tmp/

æœåŠ¡å™¨æ‰§è¡Œ:

# 1. åœæ­¢æ—§å®¹å™¨
docker-compose down

# 2. åŠ è½½æ–°é•œåƒ
docker load -i /tmp/calendar-app.tar

# 3. å¯åŠ¨æ–°å®¹å™¨
docker-compose up -d

# 4. è¿è¡Œè¿ç§»
docker exec calendar-app npx prisma migrate deploy

æ¢å¤åŠæ£€æŸ¥

bash
# 1. åœ¨å®¿ä¸»æœºåˆ›å»º avatars ç›®å½•
mkdir -p /opt/calendar-task-manager/uploads_data/avatars

# 2. ä¿®æ”¹æ‰€æœ‰è€…ä¸ºå®¹å™¨å†…çš„ nextjs ç”¨æˆ· (UID 1001)
sudo chown -R 1001:1001 /opt/calendar-task-manager/uploads_data

# 3. è®¾ç½®æƒé™
sudo chmod -R 755 /opt/calendar-task-manager/uploads_data

# 4. éªŒè¯
ls -la /opt/calendar-task-manager/uploads_data/

# 5. é‡å¯å®¹å™¨è®©æŒ‚è½½ç”Ÿæ•ˆ
cd /opt/calendar-task-manager
docker-compose restart app

# 6. éªŒè¯å®¹å™¨å†…çš„æƒé™
docker exec -it calendar-app ls -la /app/public/uploads/


å†™ä¸€ä¸ªæœ¬åœ°é•œåƒ buildï¼Œæœ¬åœ° saveï¼Œä¸è¦push dockerï¼Œä¹Ÿä¸è¦push githubï¼Œå®Œå…¨çš„æ‰‹åŠ¨å¤åˆ¶ä¸Šä¼ æ–‡ä»¶ï¼Œæ‰‹åŠ¨çš„éƒ¨ç½²å’Œé‡å¯é•œåƒï¼Œ åŒ…æ‹¬æ‰‹åŠ¨çš„ç»™æ•°æ®åº“å¢åŠ å­—æ®µï¼ŒåŒæ­¥æ•°æ®åº“è¡¨





æœ¬åœ°æ‰§è¡Œ
docker build -t calendar-task-manager:2025-11-29 .
docker save -o calendar-task-manager_2025-11-29.tar calendar-task-manager:2025-11-29

ä¼ é€æœåŠ¡å™¨

æœåŠ¡å™¨æ‰§è¡Œ


æŸ¥è¯¢æ­£åœ¨è¿è¡Œå®¹å™¨
docker ps | grep calendar-task-manager
åœæ­¢æ—§å®¹å™¨
docker stop calendar-app æˆ–è€… 
docker stop f1fae945bcff æˆ–è€…
docker-compose down
åˆ é™¤æ—§å®¹å™¨
docker rmi f1fae945bcff  æˆ–è€…
docker rmi calendar-task-manager:2025-11-29

åŠ è½½æ–°é•œåƒ
docker load -i calendar-task-manager_2025-11-29.tar
é‡å¯å®¹å™¨
docker-compose restart app æˆ–è€…
docker-compose up -d



æ•°æ®åº“å¤‡ä»½
docker exec calendar-postgres pg_dump -U postgres calendar_tasks > /opt/calendar-task-manager/backups/before_restore_$(date +%Y%m%d_%H%M%S).sql


é‡å¯å®¹å™¨
docker-compose restart app



æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰ï¼šdocker ps -a
æŸ¥çœ‹æ‰€æœ‰é•œåƒï¼šdocker images
æŸ¥çœ‹æ‚¬ç©ºé•œåƒï¼ˆæ²¡æœ‰è¢«ä»»ä½•å®¹å™¨ä½¿ç”¨çš„é•œåƒï¼‰ï¼šdocker images -f "dangling=true"
æŸ¥çœ‹æ‚¬ç©ºå®¹å™¨ï¼ˆå·²åœæ­¢ä¸”æ²¡æœ‰è¢«ä½¿ç”¨çš„å®¹å™¨ï¼‰ï¼šdocker ps -a -f "status=exited"
ä¸€é”®æ¸…ç†æ‰€æœ‰åºŸæ—§èµ„æºï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ï¼šdocker system prune -a
è¿™ä¼šåˆ é™¤ï¼š

æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨
æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„é•œåƒ
æ‰€æœ‰æœªè¢«ä½¿ç”¨çš„ç½‘ç»œ
æ›´å®‰å…¨çš„æ¸…ç†æ–¹å¼ï¼š

åªæ¸…ç†å·²åœæ­¢çš„å®¹å™¨ï¼šdocker container prune

åªæ¸…ç†æ‚¬ç©ºé•œåƒï¼šdocker image prune

åªæ¸…ç†æœªä½¿ç”¨çš„é•œåƒï¼ˆåŒ…æ‹¬æœ‰æ ‡ç­¾çš„ï¼‰ï¼šdocker image prune -a


å»ºè®®å…ˆç”¨ docker ps -a å’Œ docker images æŸ¥çœ‹ä¸€ä¸‹ï¼Œç¡®è®¤è¦åˆ é™¤çš„èµ„æºåå†æ‰§è¡Œæ¸…ç†å‘½ä»¤ã€‚




